datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

generator client {
  provider = "prisma-client-js"
}



model App {
  id String @id @default(uuid())
  name String 
  icon String? 
  version String? 

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  functions AppsOnFunctions[]
}

model Function {
  id String @id @default(uuid())
  title String  @unique
  description String? @db.Text
  icon String?
  
  apps AppsOnFunctions[]

  categoryId String?
  category Function_category? @relation(fields: [categoryId],references: [id],onDelete: Cascade)

  
  methods Method[]

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  @@index([categoryId])

}

model AppsOnFunctions {
  appId String
  app App @relation(fields: [appId],references: [id])

  functionId String
  function Function @relation(fields: [functionId],references: [id])


  @@id([appId,functionId ])
  @@index([appId])
  @@index([functionId])
}

model Method {
  id String @id @default(uuid())
  description String?
  order Int?

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
  
  functionId String?
  function Function? @relation(fields: [functionId],references: [id])

  guides Guide[]
    
  @@index([functionId])

}

model Guide {
  id String @id @default(uuid())
  description String 
  order Int?

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  methodId String?
  method Method? @relation(fields: [methodId],references: [id])

  guide_component Guide_component?  
  
  @@index([methodId])
}

model Guide_component {
  id String @id @default(uuid())
  code String @db.Text

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  guideId String? @unique
  guide Guide? @relation(fields: [guideId],references: [id])

  @@index([guideId])
}



model Function_category {
  id String @id @default(uuid()) 
  name String @unique
  icon String?

  functions Function[]
}




